<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>前端小问题总结（一） | Mobro</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端小问题总结（一）</h1><a id="logo" href="/.">Mobro</a><p class="description">如果猎鹰，耽于安逸。 -- Mobro Zhu</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">前端小问题总结（一）</h1><div class="post-meta">May 17, 2018</div><div class="post-content"><p>旨在记录自己在实际项目中遇见的一些小问题，简单做个记录。以便以后翻阅。 </p>
<h3 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h3><p>通常，解决跨域问题的方法有：</p>
<ol>
<li>document.domain </li>
<li>jsonp  </li>
<li>iframe</li>
<li>代理</li>
<li>CORS  </li>
</ol>
<p>用document.domain来指定域，是可以的，但是有局限性，也就是一级域名一致才可以。<br><a href="https://blog.csdn.net/yuan_zhikong/article/details/76038222" target="_blank" rel="noopener"><em><strong>参考document.domain</strong></em></a></p>
<h3 id="拖动"><a href="#拖动" class="headerlink" title="拖动"></a>拖动</h3><p>ondragstart 事件在用户开始拖动元素或选择的文本时触发。  </p>
<p><strong>PS:</strong>  </p>
<ol>
<li>为了让元素可拖动，需要使用 HTML5 <code>draggable=true</code> 属性。</li>
<li>链接和图片默认是可拖动的，不需要 draggable 属性。</li>
<li>Internet Explorer 8 及更早 IE 版本或 Safari 5.1 及更早版本的浏览器不支持 drag 事件。<br>在拖放的过程中会触发以下事件：<br>在拖动目标上触发事件 (源元素):</li>
</ol>
<ul>
<li>ondragstart - 用户开始拖动元素时触发</li>
<li>ondrag - 元素正在拖动时触发</li>
<li>ondragend - 用户完成元素拖动后触发</li>
</ul>
<p>释放目标时触发的事件:</p>
<ul>
<li>ondragenter - 当被鼠标拖动的对象进入其容器范围内时触发此事件</li>
<li>ondragover - 当某被拖动的对象在另一对象容器范围内拖动时触发此事件</li>
<li>ondragleave - 当被鼠标拖动的对象离开其容器范围内时触发此事件</li>
<li>ondrop - 在一个拖动过程中，释放鼠标键时触发此事件</li>
</ul>
<p><a href="http://www.runoob.com/try/try.php?filename=tryjsref_ondrag_all" target="_blank" rel="noopener">关于drag的一个demo</a></p>
<h3 id="bind"><a href="#bind" class="headerlink" title="bind()"></a>bind()</h3><p><code>bind()</code> 方法的主要作用就是将函数绑定至某个对象，<code>bind()</code> 方法会创建一个函数，函数体内this对象的值会被绑定到传入<code>bind()</code> 函数的值</p>
<h4 id="1-原理"><a href="#1-原理" class="headerlink" title="1. 原理"></a>1. 原理</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> self = <span class="keyword">this</span>; <span class="comment">// 保存原函数</span></span><br><span class="line"> <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 返回一个新函数</span></span><br><span class="line">  <span class="keyword">return</span> self.apply(context, <span class="built_in">arguments</span>); <span class="comment">// 执行新函数时，将传入的上下文context作为新函数的this</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-bind的应用场景"><a href="#2-bind的应用场景" class="headerlink" title="2. bind的应用场景"></a>2. bind的应用场景</h4><p><strong>实现对象继承</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> B = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> A.bind(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">B.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> B(<span class="string">"hello"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(b.getName()); <span class="comment">// "hello"</span></span><br></pre></td></tr></table></figure>
<p><strong>事件处理</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> paint = &#123;</span><br><span class="line"> color: <span class="string">"red"</span>,</span><br><span class="line"> count: <span class="number">0</span>,</span><br><span class="line"> updateCount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.count++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.count);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 事件处理函数绑定的错误方法：</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'button'</span>)</span><br><span class="line"> .addEventListener(<span class="string">'click'</span>, paint.updateCount); <span class="comment">// paint.updateCount函数的this指向变成了该DOM对象</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 事件处理函数绑定的正确方法：</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'button'</span>)</span><br><span class="line"> .addEventListener(<span class="string">'click'</span>, paint.updateCount.bind(paint)); <span class="comment">// paint.updateCount函数的this指向变成了paint</span></span><br></pre></td></tr></table></figure>
<p><strong>时间间隔函数</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> notify = &#123;</span><br><span class="line"> text: <span class="string">"Hello World！"</span>,</span><br><span class="line"> beforeRender: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.text);</span><br><span class="line"> &#125;,</span><br><span class="line"> render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 错误方法：</span></span><br><span class="line">  setTimeout(<span class="keyword">this</span>.beforeRender, <span class="number">0</span>); <span class="comment">// undefined</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 正确方法：</span></span><br><span class="line">  setTimeout(<span class="keyword">this</span>.beforeRender.bind(<span class="keyword">this</span>), <span class="number">0</span>); <span class="comment">// "Hello World！"</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">notify.render();</span><br></pre></td></tr></table></figure></p>
<p><strong>借用Array的原生方法</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.bind(a, <span class="string">"hello"</span>, <span class="string">"world"</span>)();</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// "hello", "world"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-与call-apply的区别"><a href="#3-与call-apply的区别" class="headerlink" title="3. 与call/apply的区别"></a>3. 与call/apply的区别</h4><p>共同点：  </p>
<p>都可以改变函数执行的上下文环境；</p>
<p>不同点：</p>
<p>bind: 不立即执行函数，一般用在异步调用和事件； call/apply： 立即执行函数。</p>
<h3 id="console"><a href="#console" class="headerlink" title="console"></a>console</h3><ol>
<li><code>console.assert(expression, obj[, obj...])</code>  </li>
</ol>
<p>接收至少两个参数，第一个参数的值或返回值为false的时候，将会在控制台上输出后续参数的值. eg:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(<span class="number">1</span> == <span class="number">1</span>, object); <span class="comment">// 无输出，返回 undefined  </span></span><br><span class="line"><span class="built_in">console</span>.assert(<span class="number">1</span> == <span class="number">2</span>, object); <span class="comment">// 输出 object</span></span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li><code>console.error(obj[, obj...])</code>  </li>
</ol>
<p>用于输出错误信息，用法和常见的console.log一样，不同点在于输出内容会标记为错误的样式，便于分辨。  </p>
<ol start="3">
<li><code>console.dir(obj)</code>  </li>
</ol>
<p>将传入对象的属性，包括子对象的属性以列表形式输出. eg:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">'classicemi'</span>, <span class="attr">college</span>: <span class="string">'HUST'</span>, <span class="attr">major</span>: <span class="string">'ei'</span>&#125;;  </span><br><span class="line"><span class="built_in">console</span>.dir(obj);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>console.group()</code></li>
</ol>
<p>能够让控制台输出的语句产生不同的层级嵌套关系，每一个console.group()会增加一层嵌套，相反要减少一层嵌套可以使用console.groupEnd()方法。和console.group()相似的方法是console.groupCollapsed()作用相同，不同点是嵌套的输出内容是折叠状态，在有大段内容输出的时候使用这个方法可以使输出版面不至于太长吧.</p>
<ol start="5">
<li><p><code>console.info(obj[, obj...])</code><br>与之前说到的console.error一样，用于输出信息，没有什么特别之处。</p>
</li>
<li><p><code>console.table()</code>  </p>
</li>
</ol>
<p>可将传入的对象，或数组以表格形式输出，相比传统树形输出，这种输出方案更适合内部元素排列整齐的对象或数组，不然可能会出现很多的 undefined。实际中感觉用得少。</p>
<ol start="7">
<li><code>console.profile([profileLabel])</code>  </li>
</ol>
<p>借助控制台以及console.profile()方法我们可以很方便地监控运行性能。</p>
<ol start="8">
<li><code>console.time(name)</code></li>
</ol>
<p>将成对的console.time()和console.timeEnd()之间代码的运行时间输出到控制台上，name参数可作为标签名。</p>
<ol start="9">
<li><code>console.trace()</code>  </li>
</ol>
<p>console.trace()用来追踪函数的调用过程。在大型项目尤其是框架开发中，函数的调用轨迹可以十分复杂，console.trace()方法可以将函数的被调用过程清楚地输出到控制台上。</p>
<ol start="10">
<li><code>console.warn(object[, object...])</code></li>
</ol>
<p>输出参数的内容，作为警告提示。</p>
<p><em>console对象上的五个直接输出方法，console.log(),console.warn(),console.error(),console.exception()(等同于console.error())和console.info()，都可以使用占位符。支持的占位符有四种，分别是字符(%s)、整数(%d或%i)、浮点数(%f)和对象(%o)。</em> eg:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'%s是%d年%d月%d日'</span>, <span class="string">'今天'</span>, <span class="number">2014</span>, <span class="number">4</span>, <span class="number">15</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'圆周率是%f'</span>, <span class="number">3.14159</span>);</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">'classicemi'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'%o'</span>, obj);</span><br></pre></td></tr></table></figure>
<p><em>还有一种特殊的标示符%c，对输出的文字可以附加特殊的样式，当进行大型项目开发的时候，代码中可能有很多其他开发者添加的控制台语句。开发者对自己的输出定制特别的样式就可以方便自己在眼花缭乱的输出结果中一眼看到自己需要的内容。</em> eg:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'%cMy name is classicemi.'</span>, <span class="string">'color: #fff; background: #f40; font-size: 24px;'</span>);</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/js/">js</a><a href="/tags/console/">console</a><a href="/tags/跨域/">跨域</a></div><div class="post-nav"><a class="pre" href="/2018/05/22/ERR-registry-error-parsing-json/">ERR! registry error parsing json</a><a class="next" href="/2018/05/17/Jade入门学习/">Jade入门学习</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/console/" style="font-size: 15px;">console</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/pug/" style="font-size: 15px;">pug</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/ques/" style="font-size: 15px;">ques</a> <a href="/tags/scss/" style="font-size: 15px;">scss</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/npm/" style="font-size: 15px;">npm</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/jade/" style="font-size: 15px;">jade</a> <a href="/tags/跨域/" style="font-size: 15px;">跨域</a> <a href="/tags/localStorage/" style="font-size: 15px;">localStorage</a> <a href="/tags/cookie/" style="font-size: 15px;">cookie</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/阿里云/" style="font-size: 15px;">阿里云</a> <a href="/tags/千位分隔/" style="font-size: 15px;">千位分隔</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/vue-cli/" style="font-size: 15px;">vue-cli</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/28/js实现千位分隔/">js实现千位分隔</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/27/vue学习笔记（一）/">vue学习笔记（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/26/git-pull代码冲突。怪异问题，了解一下/">git pull代码冲突。怪异问题，了解一下</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/20/自己封装myLocalStorage，使其有有效期/">自己封装myLocalStorage，使其有有效期</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/15/使用scss为css样式自动添加浏览器前缀/">使用scss为css样式自动添加浏览器前缀</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/12/论Object-keys-Object-getOwnPropertyNames-for-in-Object-getOwnPropertySymbol-区别/">论Object.keys(), Object.getOwnPropertyNames(), for in, Object.getOwnPropertySymbol()区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/常用的linux命令/">常用的linux命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/GIT-error-pathspec-xxx-did-not-match-any-file-s-known-to-git/">GIT: error: pathspec 'xxx did not match any file(s) known to git</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/01/阿里云搭建大概步骤/">阿里云搭建大概步骤</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/31/command-not-found-shell-returned-127/">command not found shell returned 127</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/MobroChu" title="Mobro Zhu's Github" target="_blank">Mobro Zhu's Github</a><ul></ul><a href="https://blog.csdn.net/weixin_41610178" title="不营养、的CSDN博客" target="_blank">不营养、的CSDN博客</a><ul></ul><a href="http://www.cnblogs.com/Mobro/" title="不营养、的博客园" target="_blank">不营养、的博客园</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Mobro.</a><br/> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>