<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>shell script 学习 | Mobro</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">shell script 学习</h1><a id="logo" href="/.">Mobro</a><p class="description">如果猎鹰，耽于安逸。 -- Mobro Zhu</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">shell script 学习</h1><div class="post-meta">Dec 3, 2018</div><div class="post-content"><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># #! 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序。</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>脚本运行方式：</p>
<ol>
<li><p>作为可执行程序 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./test.sh</span><br><span class="line">./test.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>作为解释器参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash test.sh</span><br><span class="line">/bin/sh test.sh</span><br><span class="line">/bin/php test.php</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>定义变量时，变量名不加美元符号（$，PHP语言中变量需要）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 声明变量</span></span><br><span class="line">test_name=<span class="string">"mobro.site"</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> `ls /etc`</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> $(ls /etc)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 使用变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$test_name</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;test_name&#125;</span>	<span class="comment"># 为了帮助解释器识别变量的边界</span></span><br><span class="line"><span class="comment"># eg</span></span><br><span class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"I am good at <span class="variable">$&#123;skill&#125;</span>Script"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">readonly</span> test_name 	<span class="comment"># 将 test_name 变成只读变量</span></span><br><span class="line"><span class="built_in">unset</span> test_name	<span class="comment"># 删除变量；unset 不能删除只读变量</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>变量类型<br>运行shell时，会同时存在三种变量：<br>1) 局部变量 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。<br>2) 环境变量 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。<br>3) shell变量 shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p>
<ul>
<li><p><strong>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；双引号里可以有变量，双引号里可以出现转义字符</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">greeting=<span class="string">"hello, "</span><span class="variable">$test_name</span><span class="string">" !"</span>	<span class="comment"># 字符串拼接</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#greeting&#125;</span>	<span class="comment"># 获取字符串长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;greeting:1:4&#125;</span>	<span class="comment"># 提取字符</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">"<span class="variable">$greeting</span>"</span> el`	<span class="comment"># 查找 el 的位置（先找到哪个字符就先计算哪个）</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 定义数组的形式 =&gt;&gt;&gt;&gt; 数组名=(值1 值2 ... 值n)</span></span><br><span class="line">array=(</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3)</span><br><span class="line">array1=(1 2 3)</span><br><span class="line">array[3]=4</span><br><span class="line">array[4]=5</span><br><span class="line"><span class="comment">## 读数组</span></span><br><span class="line">val=<span class="variable">$&#123;array[0]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$val</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$array</span>[@]	<span class="comment"># 获取整个数组</span></span><br><span class="line"><span class="built_in">echo</span> `length: <span class="string">"<span class="variable">$&#123;#array[@]&#125;</span>"</span>`	<span class="comment"># 获取数组长度</span></span><br><span class="line"><span class="built_in">echo</span> `length: <span class="string">"<span class="variable">$&#123;#array[*]&#125;</span>"</span>`	<span class="comment"># 获取数组长度</span></span><br><span class="line"><span class="built_in">echo</span> `length: <span class="string">"<span class="variable">$&#123;#array[2]&#125;</span>"</span>`	<span class="comment"># 获取数组第二元素的长度</span></span><br><span class="line"><span class="comment">## 多行注释 EOF可以为其他任意符号</span></span><br><span class="line">:&lt;&lt; EOF</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">:&lt;&lt;<span class="string">'</span></span><br><span class="line"><span class="string">还是注释...</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="shell-传递参数"><a href="#shell-传递参数" class="headerlink" title="shell 传递参数"></a>shell 传递参数</h3><p><strong>脚本内获取参数的格式为：$n。n 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Shell 传递参数实例！</span></span><br><span class="line">chmod +x test.sh </span><br><span class="line">./test.sh 1 2 3</span><br><span class="line">:&lt;&lt; <span class="string">'</span></span><br><span class="line"><span class="string">第一个参数为：1</span></span><br><span class="line"><span class="string">第二个参数为：2</span></span><br><span class="line"><span class="string">第三个参数为：3</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="variable">$#</span>		<span class="comment"># 传递到脚本的参数个数</span></span><br><span class="line">$*		<span class="comment"># 以一个单字符串显示所有向脚本传递的参数。</span></span><br><span class="line">		<span class="comment"># 如"$*"用「"」括起来的情况、以"$1 $2 … $n"的形式输出所有参数。</span></span><br><span class="line">$$ 	<span class="comment"># 脚本运行的当前进程 ID</span></span><br><span class="line"><span class="variable">$@</span>		<span class="comment"># 以一个单字符串显示所有向脚本传递的参数。</span></span><br><span class="line">		<span class="comment"># 如"$*"用「"」括起来的情况、以"$1" "$2" … "$n"的形式输出所有参数。</span></span><br><span class="line">$-		<span class="comment"># 显示 shell 使用的当前选项</span></span><br><span class="line">$?		<span class="comment"># 显示最后命令的退出状态。0 表示没有错误，其他表示有错误</span></span><br></pre></td></tr></table></figure></p>
<p><code>$*</code> 和 <code>$@</code> 区别： 假设在脚本运行时写了三个参数 1、2、3，，则 “ * “ 等价于 “1 2 3”（传递了一个参数），而 “@” 等价于 “1” “2” “3”（传递了三个参数）。看如下代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"-- \$* 演示 ---"</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"$*"</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"-- \$@ 演示 ---"</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>执行结果：<br>$ chmod +x test.sh<br>$ ./test.sh 1 2 3<br>– $* 演示 —<br>1 2 3<br>– $@ 演示 —<br>1<br>2<br>3</p>
<h3 id="shell-运算符"><a href="#shell-运算符" class="headerlink" title="shell 运算符"></a>shell 运算符</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">val=`expr 2 + 2`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2 + 2 = <span class="variable">$val</span>"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</li>
<li>完整的表达式要被 <code></code> 包含，注意这个字符不是常用的单引号。</li>
</ul>
<p>常见的运算有:    <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>=</code>, <code>==</code>, <code>!=</code>；值得注意的是：<br> <strong>条件表达式要放在方括号之间，并且要有空格，例如: [$a==$b] 是错误的，必须写成 [ $a == $b ]</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">val1=`expr 2 \* 2`</span><br><span class="line">val2=`expr 2 / 2`</span><br><span class="line"><span class="comment">#:&lt;&lt; eof</span></span><br><span class="line">val3=[ <span class="variable">$val2</span> == 1 ]</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$val3</span>"</span></span><br><span class="line">上面个这是一种错误写法，不能使用 `val3=[ <span class="variable">$val2</span> == 1 ]` 这种写法, 一般 == 或者 != 是用于条件判断时用</span><br><span class="line"><span class="comment">#eof</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$val2</span> == 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"val2 = <span class="variable">$val2</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>在 MAC 中 shell 的 expr 语法是：$((表达式))，此处表达式中的 “*” 不需要转义符号 “\” 。</li>
<li>乘号(*)前边必须加反斜杠()才能实现乘法运算；</li>
</ul>
<p>常见的关系运算符：<br>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -eq 相等</span></span><br><span class="line"><span class="comment"># -ne 不相等</span></span><br><span class="line"><span class="comment"># -gt 左 大于 右</span></span><br><span class="line"><span class="comment"># -lt 左 小于 右</span></span><br><span class="line"><span class="comment"># -ge 左 大于等于 右</span></span><br><span class="line"><span class="comment"># -le 左 小于等于 右</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -eq <span class="variable">$b</span>: a 等于 b"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"不等于"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>常见的布尔运算<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ! 非运算</span></span><br><span class="line"><span class="comment"># -o 或运算</span></span><br><span class="line"><span class="comment"># -a 与运算</span></span><br><span class="line">a=99</span><br><span class="line">b=15</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -ge 15 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"是的，满足条件"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>常见的逻辑运算<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &amp;&amp; 逻辑and</span></span><br><span class="line"><span class="comment"># || 逻辑or</span></span><br><span class="line">a=99</span><br><span class="line">b=15</span><br><span class="line"><span class="comment"># if [ $a -lt 100 &amp;&amp; $b -ge 15 ] 	# 这样写是不合理的，应该如下写。但是为何呢？</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 &amp;&amp; <span class="variable">$b</span> -ge 15]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">" ----- true "</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<h3 id="echo-命令"><a href="#echo-命令" class="headerlink" title="echo 命令"></a><a href="http://www.runoob.com/linux/linux-shell-echo.html" target="_blank" rel="noopener">echo 命令</a></h3><ul>
<li>echo 的 <code>&quot;&quot;</code> 是可以省略的</li>
<li>read 命令从标准输入中读取一行,并把输入行的每个字段的值指定给 shell 变量<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -e 开启转义</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示结果指定到某个文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"it's a test"</span> &gt; <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取日期</span></span><br><span class="line"><span class="built_in">echo</span> `date +%y-%m-%d`</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> firstStr secondStr	<span class="comment"># read 命令一个一个词组地接收输入的参数，每个词组需要使用空格进行分隔；如果输入的词组个数大于需要的参数个数，则多出的词组将被作为整体为最后一个参数接收。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例，test.sh 代码：</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入一段文字:"</span> -n 6 -t 5 -s password</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\npassword is <span class="variable">$password</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -p 输入提示文字</span></span><br><span class="line"><span class="comment"># -n 输入字符长度限制</span></span><br><span class="line"><span class="comment"># -t 输入限时</span></span><br><span class="line"><span class="comment"># -s 隐藏输入内容</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="printf-命令"><a href="#printf-命令" class="headerlink" title="printf 命令"></a>printf 命令</h3><ul>
<li>相比于 echo 移植性更好。</li>
<li>使用引用文本或空格分隔的参数，外面可以在 printf 中使用格式化字符串，还可以制定字符串的宽度、左右对齐方式等。默认 printf 不会像 echo 自动添加换行符，我们可以手动添加 \n。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># printf 语法</span></span><br><span class="line"><span class="built_in">printf</span>  format-string  [arguments...]</span><br><span class="line"><span class="comment"># format-string 格式控制字符串</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"%-10s %-8s %-4s\n"</span> 姓名 性别 体重kg  </span><br><span class="line"><span class="built_in">printf</span> <span class="string">"%-10s %-8s %-4.2f\n"</span> 郭靖 男 66.1234 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">"%-10s %-8s %-4.2f\n"</span> 杨过 男 48.6543 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">"%-10c %-8s %-4.2f\n"</span> 郭芙 女 47.9876</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>%s %c %d %f都是格式替代符<br>%-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。<br>%-4.2f 指格式化为小数，其中.2指保留2位小数。</p>
<h3 id="test-命令"><a href="#test-命令" class="headerlink" title="test 命令"></a>test 命令</h3><p>用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。<br>在代码中 [] 执行基本的算数运算。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num1=100</span><br><span class="line">num2=100</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$&#123;num1&#125;</span> -eq $[num2]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">printf</span> <span class="string">"\n -------- 分割线 -------- \n%s == %s"</span> <span class="variable">$num1</span> <span class="variable">$num2</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">'不等'</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>结果如下：<br><img src="https://img-blog.csdnimg.cn/20181129113332289.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTYxMDE3OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><em>?? 为什么结果最后有个 % 呢？</em><br><em>?? -eq, =, == 在 test 命令中好像是通用的</em></p>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><ul>
<li><p>if else if else</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    command1</span><br><span class="line"><span class="keyword">elif</span> condition2 </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    command2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># 写成一行</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN; <span class="keyword">do</span> command1; command2; ... <span class="keyword">done</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># while 循环</span></span><br><span class="line">int=1</span><br><span class="line"><span class="keyword">while</span>(( <span class="variable">$int</span>&lt;=5 ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$int</span></span><br><span class="line">	<span class="built_in">let</span> <span class="string">"int++"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eg: </span></span><br><span class="line"><span class="keyword">for</span> loop <span class="keyword">in</span> 1 2 3 4 5</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"<span class="variable">$loop</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># until 循环</span></span><br><span class="line"><span class="comment"># until 循环执行一系列命令直至条件为 true 时停止。</span></span><br><span class="line">a=0</span><br><span class="line"></span><br><span class="line">until [ ! <span class="variable">$a</span> -lt 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">   a=`expr <span class="variable">$a</span> + 1`</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>使用中使用了 Bash let 命令，它用于执行一个或多个表达式，变量计算中不需要加上 $ 来表示变量</p>
<ul>
<li><p>无限循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( ; ; ))</span><br></pre></td></tr></table></figure>
</li>
<li><p>case</p>
</li>
</ul>
<p>取值后面必须为单词in，每一模式必须以右括号结束。取值可以为变量或常数。匹配发现取值符合某一模式后，其间所有命令开始执行直至 ;;。<br>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'输入 1 到 4 之间的数字:'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'你输入的数字为:'</span></span><br><span class="line"><span class="built_in">read</span> aNum</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">    1)  <span class="built_in">echo</span> <span class="string">'你选择了 1'</span></span><br><span class="line">    ;;</span><br><span class="line">    2)  <span class="built_in">echo</span> <span class="string">'你选择了 2'</span></span><br><span class="line">    ;;</span><br><span class="line">    3)  <span class="built_in">echo</span> <span class="string">'你选择了 3'</span></span><br><span class="line">    ;;</span><br><span class="line">    4)  <span class="built_in">echo</span> <span class="string">'你选择了 4'</span></span><br><span class="line">    ;;</span><br><span class="line">    *)  <span class="built_in">echo</span> <span class="string">'你没有输入 1 到 4 之间的数字'</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>跳出循环<br>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，Shell使用两个命令来实现该功能：break和continue。</li>
</ul>
<h3 id="shell-函数"><a href="#shell-函数" class="headerlink" title="shell 函数"></a>shell 函数</h3><p>1、可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。<br>2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="keyword">function</span> ] funname [()]</span><br><span class="line">&#123;</span><br><span class="line">    action;</span><br><span class="line">    [<span class="built_in">return</span> int;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li><strong>函数返回值在调用该函数后通过 <code>$?</code> 来获得。</strong></li>
<li><strong>所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可。</strong></li>
<li><strong>调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">funWithParam()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"第一个参数为 <span class="variable">$1</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"第二个参数为 <span class="variable">$2</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"第十个参数为 <span class="variable">$10</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"第十个参数为 <span class="variable">$&#123;10&#125;</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"第十一个参数为 <span class="variable">$&#123;11&#125;</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"参数总数有 <span class="variable">$#</span> 个!"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"作为一个字符串输出所有参数 $* !"</span></span><br><span class="line">&#125;</span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br></pre></td></tr></table></figure>
</li>
</ol>
</div><div class="tags"><a href="/tags/linux/">linux</a><a href="/tags/shell/">shell</a><a href="/tags/shell-script/">shell script</a></div><div class="post-nav"><a class="pre" href="/2018/12/03/通过 ssh 建立本地与 github 的连接/">node 之 buffer 笔记</a><a class="next" href="/2018/12/03/node-之-buffer-笔记/">node 之 buffer 笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/npm/" style="font-size: 15px;">npm</a> <a href="/tags/listen-eaddrinuse/" style="font-size: 15px;">listen eaddrinuse</a> <a href="/tags/3000/" style="font-size: 15px;">3000</a> <a href="/tags/lsof/" style="font-size: 15px;">lsof</a> <a href="/tags/jade/" style="font-size: 15px;">jade</a> <a href="/tags/pug/" style="font-size: 15px;">pug</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/ques/" style="font-size: 15px;">ques</a> <a href="/tags/centos-7/" style="font-size: 15px;">centos 7</a> <a href="/tags/operation-not-permitted/" style="font-size: 15px;">operation not permitted</a> <a href="/tags/安全防范/" style="font-size: 15px;">安全防范</a> <a href="/tags/自定义脚本/" style="font-size: 15px;">自定义脚本</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/alias/" style="font-size: 15px;">alias</a> <a href="/tags/bash-profile/" style="font-size: 15px;">.bash_profile</a> <a href="/tags/permission-denied/" style="font-size: 15px;">permission denied</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/buffer/" style="font-size: 15px;">buffer</a> <a href="/tags/scss/" style="font-size: 15px;">scss</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/console/" style="font-size: 15px;">console</a> <a href="/tags/跨域/" style="font-size: 15px;">跨域</a> <a href="/tags/千位分隔/" style="font-size: 15px;">千位分隔</a> <a href="/tags/localStorage/" style="font-size: 15px;">localStorage</a> <a href="/tags/cookie/" style="font-size: 15px;">cookie</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/阿里云/" style="font-size: 15px;">阿里云</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/vue-cli/" style="font-size: 15px;">vue-cli</a> <a href="/tags/stylus/" style="font-size: 15px;">stylus</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell-script/" style="font-size: 15px;">shell script</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/ssh-keygen/" style="font-size: 15px;">ssh-keygen</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/通过 ssh 建立本地与 github 的连接/">node 之 buffer 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/shell script 学习/">shell script 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/node-之-buffer-笔记/">node 之 buffer 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/Permission denied (publickey)/">node 之 buffer 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/03/mac 系统自定义命令，定制脚本入门/">node 之 buffer 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/06/stylus入门学习笔记/">stylus入门学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/24/vue学习笔记（二）/">vue学习笔记（二）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/28/js实现千位分隔/">js实现千位分隔</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/28/Error: listen EADDRINUSE :::3000/">js实现千位分隔</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/28/Operation not permitted/">js实现千位分隔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/MobroChu" title="Mobro Zhu's Github" target="_blank">Mobro Zhu's Github</a><ul></ul><a href="https://blog.csdn.net/weixin_41610178" title="不营养、的CSDN博客" target="_blank">不营养、的CSDN博客</a><ul></ul><a href="http://www.cnblogs.com/Mobro/" title="不营养、的博客园" target="_blank">不营养、的博客园</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Mobro.</a><br/> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>